# Version History - MusicPlayer

## v2.0.1 (2026-01-12)
### 変更点
- **スキャン処理の高速化**（File API使用）
  - SDカード等の大容量フォルダのスキャン速度を大幅に改善
- **再生挙動の改善**
  - アプリの設定画面を開いても音楽再生が止まらないように修正
- **アプリアイコン変更**
  - 白背景に黒音符のモダンなデザインに変更
- **設定画面の表記修正**
  - 個人情報を含むパスの例示を修正

---

## v2.0.0 (2026-01-12)
### 変更点
- **通知コントロール完成**
  - シャッフル、前の曲、再生/一時停止、次の曲、終了（×）の5ボタン
  - シャッフル無効時は斜線アイコン表示
  - ×ボタンでアプリを完全に終了（通知も消去）
- **プレイリスト削除機能追加**
  - プレイリスト一覧で長押しすると削除確認ダイアログを表示
  - 元のM3Uファイルは削除されず、アプリ内リストからのみ削除
- **ミニプレイヤーUI改善**
  - シャッフル/リピート有効時に背景グレー表示

---

## v1.9.9 (2026-01-12)
### 変更点
- **通知にも背景グレー表示を追加**
  - 背景グレー付きアイコン3種類を作成（ic_shuffle_on, ic_repeat_on, ic_repeat_one_on）
  - 有効時に背景グレー付きアイコンに切り替え
  - アプリ内・ミニプレイヤー・通知すべてでUIが統一

---

## v1.9.8 (2026-01-12)
### 変更点
- **ミニプレイヤーにも背景グレー表示を追加**
  - シャッフル/リピート有効時に背景グレー+アイコン色primary
  - フルスクリーンプレイヤーと同じUIに統一

---

## v1.9.7 (2026-01-12)
### 変更点
- **シャッフル/リピートUIを背景グレー方式に統一**
  - アプリ内：有効時に背景グレー表示（既存維持）
  - 通知：斜線アイコンは使わず、通常アイコンを使用
  - ラベルで有効/無効状態を表示

---

## v1.9.6 (2026-01-12)
### 変更点
- **シャッフル/リピート無効時に斜線アイコン表示**
  - `ic_shuffle_off.xml`と`ic_repeat_off.xml`を追加
  - 無効状態が視覚的にわかるUI
- **通知に終了ボタン（×）を追加**
  - 6アクション構成：シャッフル、リピート、前、再生/一時停止、次、終了

---

## v1.9.5 (2026-01-12)
### 変更点
- **通知アイコンをアプリ内と完全統一**
  - カスタムベクターアイコン8種類を追加（シャッフル、リピート、リピートワン、前の曲、次の曲、再生、一時停止、閉じる）
  - Material Iconsと同じデザインを使用
- **プレイリスト削除機能を追加**
  - プレイリスト一覧で長押しすると削除確認ダイアログを表示
  - 元のM3Uファイルは削除されず、アプリ内リストからのみ削除

---

## v1.9.4 (2026-01-12)
### 変更点
- **通知UIをアプリ内ミニプレイヤーと統一**
  - ボタン配置：シャッフル→リピート→前の曲→再生/一時停止→次の曲
  - 終了ボタン「×」を追加
  - ラベルを日本語化

---

## v1.9.3 (2026-01-12)
### 変更点
- **通知コントロール二重発火の根本原因を解消**
  - AndroidManifest.xmlからMusicNotificationReceiverのintent-filterを削除
  - PendingIntentからの直接呼び出しのみに統一
  - これにより通知ボタンの連続発火問題が完全に解消

---

## v1.9.2 (2026-01-12)
### 変更点
- **通知コントロールの連続発火問題を修正**
  - 300msデバウンス機能を追加して連続アクションを防止
  - `rememberUpdatedState`で関数参照を安全に保持
  - メインスレッドでの状態更新を保証（Handlerを使用）
  - `RECEIVER_NOT_EXPORTED`に戻して安全性を確保

---

## v1.9.1 (2026-01-12)
### 変更点
- **通知バーコントロールのバグを修正**
  - Android 13以降で必要な通知パーミッションの実行時リクエストを追加
  - `createNotificationChannel`と`updateNotification`関数をMainActivityクラス内に正しく配置
  - MusicNotificationReceiverをブロードキャスト送信方式に修正
  - `androidx.media:media:1.7.0`依存関係を追加

### 安定化
- 通知機能の安定性向上

---

## v1.7.0 (2026-01-10)
### 変更点
- **アニメーションを追加**
  - フルスクリーンプレイヤーの開閉にスライドアニメーション
- **アルバムアート表示**
  - ミニプレイヤーバーとフルスクリーンプレイヤーにアルバムアートを表示
  - 埋め込み画像がない場合は音符アイコンを表示
- **プレイリストのフォルダ表示**
  - プレイリスト一覧から選択して曲一覧を表示する形式に変更
  - 戻るボタンでプレイリスト一覧に戻る

---

## v1.6.0 (2026-01-10)
### 変更点
- **ミニプレイヤーバーを追加**
  - 曲終了時の自動次曲再生機能を追加
- **存在しないファイルのグレーアウト表示**
  - ファイルが存在しない曲は薄いグレーで表示
  - 再生時に「ファイルが見つかりません」メッセージを表示

---

## v1.4.2 (2026-01-10)
### 変更点
- **PlaylistTabのクラッシュを修正**
  - 1つのLazyColumnで全アイテムを表示するよう変更

---

## v1.4.1 (2026-01-10)
### 変更点
- **プレイリスト読み込み時のクラッシュを修正**
### 変更点
- **プレイリスト読み込み機能を修正**

### 修正ファイル
- `MainActivity.kt`

---

## v1.3.0 (2025-09-09)
- UI/UXを大幅に改善
- 設定画面や高度なライブラリ管理機能を追加
- Initial release
